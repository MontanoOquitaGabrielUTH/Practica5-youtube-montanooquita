<!-- TEMPLATE: Subir Video a YouTube -->
{% extends 'videos/base.html' %}

{% block title %}Subir Video | YouTube Manager{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- Header con 칤cono YouTube -->
            <div class="text-center mb-5">
                <i class="fab fa-youtube fa-4x text-danger mb-3"></i>
                <h1 class="display-4">游닋 Subir Video a YouTube</h1>
                <p class="lead text-muted">Sube tu contenido directamente desde Django</p>
            </div>

            <!-- Card de formulario -->
            <div class="card shadow-lg border-0">
                <div class="card-header bg-gradient text-white">
                    <h4 class="mb-0"><i class="fas fa-upload"></i> Informaci칩n del Video</h4>
                </div>
                <div class="card-body p-4">
                    <form method="post" enctype="multipart/form-data" id="uploadForm">
                        {% csrf_token %}
                        
                        <!-- T칤tulo -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                <i class="fas fa-heading text-danger"></i> T칤tulo del Video
                            </label>
                            <input type="text" name="titulo" class="form-control form-control-lg" 
                                   placeholder="Ej: Tutorial Django REST Framework 2026" required>
                            <small class="text-muted">M치ximo 100 caracteres</small>
                        </div>

                        <!-- Descripci칩n -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                <i class="fas fa-align-left text-danger"></i> Descripci칩n
                            </label>
                            <textarea name="descripcion" class="form-control" rows="5" 
                                      placeholder="Describe de qu칠 trata tu video..." required></textarea>
                            <small class="text-muted">M치ximo 5000 caracteres</small>
                        </div>

                        <!-- Categor칤a -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                <i class="fas fa-folder text-danger"></i> Categor칤a
                            </label>
                            <select name="categoria" class="form-select form-select-lg">
                                <option value="22">People & Blogs</option>
                                <option value="27" selected>Education</option>
                                <option value="28">Science & Technology</option>
                                <option value="10">Music</option>
                                <option value="17">Sports</option>
                            </select>
                        </div>

                        <!-- Privacidad -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                <i class="fas fa-eye text-danger"></i> Privacidad
                            </label>
                            <div class="btn-group w-100" role="group">
                                <input type="radio" name="privacidad" value="private" class="btn-check" id="private" checked>
                                <label class="btn btn-outline-secondary" for="private">
                                    <i class="fas fa-lock"></i> Privado
                                </label>
                                
                                <input type="radio" name="privacidad" value="unlisted" class="btn-check" id="unlisted">
                                <label class="btn btn-outline-secondary" for="unlisted">
                                    <i class="fas fa-link"></i> No listado
                                </label>
                                
                                <input type="radio" name="privacidad" value="public" class="btn-check" id="public">
                                <label class="btn btn-outline-danger" for="public">
                                    <i class="fas fa-globe"></i> P칰blico
                                </label>
                            </div>
                        </div>

                        <!-- Archivo de Video -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                <i class="fas fa-video text-danger"></i> Archivo de Video
                            </label>
                            <input type="file" name="video" class="form-control form-control-lg" 
                                   accept="video/*" required id="videoFile">
                            <small class="text-muted">Formatos: MP4, AVI, MOV, WMV. M치ximo: 256 GB</small>
                            
                            <!-- Preview -->
                            <div id="videoPreview" class="mt-3 d-none">
                                <video class="w-100 rounded shadow-sm" controls></video>
                            </div>
                        </div>

                        <!-- Botones -->
                        <div class="d-grid gap-2 mt-5">
                            <button type="submit" class="btn btn-danger btn-lg shadow-lg">
                                <i class="fas fa-upload"></i> Subir a YouTube
                            </button>
                            <a href="{% url 'videos:mis_videos' %}" class="btn btn-outline-secondary btn-lg">
                                <i class="fas fa-arrow-left"></i> Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info de Cuota -->
            <div class="alert alert-info mt-4">
                <h6><i class="fas fa-info-circle"></i> Informaci칩n de Cuota</h6>
                <p><strong>Subir un video consume 1,600 unidades de tu cuota diaria.</strong></p>
                <p class="mb-0">L칤mite diario: 10,000 unidades = Aproximadamente 6 videos/d칤a</p>
            </div>
        </div>
    </div>
</div>

<script>
    // Preview de video antes de subir
    document.getElementById('videoFile').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const preview = document.getElementById('videoPreview');
            const video = preview.querySelector('video');
            const url = URL.createObjectURL(file);
            
            video.src = url;
            preview.classList.remove('d-none');
            
            // Mostrar info del archivo
            const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
            console.log(`Archivo: ${file.name}, Tama침o: ${sizeMB} MB`);
        }
    });

    // Validar antes de enviar
    document.getElementById('uploadForm').addEventListener('submit', function(e) {
        const file = document.getElementById('videoFile').files[0];
        if (!file) {
            e.preventDefault();
            alert('Por favor selecciona un archivo de video');
            return;
        }
        
        // Confirmar subida
        if (!confirm('쮼st치s seguro de subir este video a YouTube?')) {
            e.preventDefault();
        }
    });
</script>

<style>
    .bg-gradient {
        background: linear-gradient(135deg, #FF0000 0%, #CC0000 100%);
    }
</style>
{% endblock %}